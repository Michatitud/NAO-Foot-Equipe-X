# -*- encoding: UTF-8 -*-

import sys
from naoqi import ALProxy
import time

def main(robotIP):
    PORT = 9559

    try:
        motionProxy = ALProxy("ALMotion", robotIP, PORT)
    except Exception,e:
        print "Could not create proxy to ALMotion"
        print "Error was: ",e
        sys.exit(1)

    motionProxy.setStiffnesses("Body", 1.0)

    # Example showing how to set angles, using a fraction of max speed
    names  = ["Body"]
    angles  = [-0.6872739791870117, 0.43254613876342773, -0.7271580696105957, 0.8636000156402588, 2.0785279273986816, -0.03490658476948738, -1.8238691091537476, 0.7567999958992004, -0.2438640594482422, -0.07359004020690918, -0.6626460552215576, 2.112546443939209, -1.1842899322509766, 0.07520794868469238, -0.2438640594482422, 0.052197933197021484, -0.6765360832214355, 2.112546443939209, -1.1857401132583618, -0.08125996589660645, 0.18565607070922852, 0.3141592741012573, 0.5920820236206055, 1.282465934753418, -0.0844118595123291, 0.8459999561309814]
    fractionMaxSpeed  = 0.2
    motionProxy.setAngles(names, angles, fractionMaxSpeed)

    time.sleep(3.0)
    motionProxy.setStiffnesses("Body", 1.0)
    angles = [0.7224719524383545, 0.46782803535461426, -0.15804386138916016, -0.1565098762512207, -0.3237159252166748, -1.2609061002731323, 0.19937801361083984, 0.7555999755859375, -0.23619413375854492, -0.06131792068481445, -0.5675380229949951, 2.112546443939209, -1.182755947113037, 0.07827591896057129, -0.23619413375854492, 0.05373191833496094, -0.5722239017486572, 2.112546443939209, -1.1857401132583618, -0.0827939510345459, -0.8497941493988037, -0.7501680850982666, 0.9771161079406738, 0.07674193382263184, -1.7012481689453125, 0.7192000150680542]

    fractionMaxSpeed  = 0.2
    motionProxy.setAngles(names, angles, fractionMaxSpeed)
    
    motionProxy.setStiffnesses("Body", 1.0)

    time.sleep(3.0)
    motionProxy.setStiffnesses("Body", 1.0)
    angles = [0.09966802597045898, 0.5092461109161377, 1.1565940380096436, 1.2839161157608032, -1.4742159843444824, -0.04597806930541992, 0.18250393867492676, 0.785599946975708, -0.2730100154876709, 0.21326804161071777, -0.8743381500244141, 2.112546443939209, -1.1842899322509766, 0.06753802299499512, -0.2730100154876709, 0.13810205459594727, -0.4418339729309082, 1.7349958419799805, -1.1136419773101807, 0.12582993507385254, -0.420274019241333, -1.115260124206543, 1.7533200979232788, 0.5093300342559814, -1.8238691091537476, 0.6979999542236328]

    fractionMaxSpeed  = 0.1
    motionProxy.setAngles(names, angles, fractionMaxSpeed)
   
    motionProxy.setStiffnesses("Body", 1.0)

    time.sleep(3.0)
    motionProxy.setStiffnesses("Body", 1.0)
    angles = [-0.5737578868865967, 0.35584592819213867, 1.992624044418335, 0.49697399139404297, -0.5584180355072021, -1.0798940658569336, -1.4051861763000488, 0.7087999582290649, -0.2638061046600342, -0.06592011451721191, -0.5782761573791504, 2.112546443939209, -1.185823917388916, 0.08594608306884766, -0.2638061046600342, 0.04912996292114258, -0.5890979766845703, 2.112546443939209, -1.1857401132583618, -0.0858621597290039, 0.3728039264678955, -0.5630199909210205, 1.6674160957336426, 1.432797908782959, -1.4849538803100586, 0.7588000297546387]

    fractionMaxSpeed  = 0.2
    motionProxy.setAngles(names, angles, fractionMaxSpeed)
    time.sleep(3.0)
    motionProxy.setStiffnesses("Body", 1.0) 
    fractionMaxSpeed  = 1
    for i in range(5):
    	motionProxy.closeHand('RHand')
    	time.sleep(0.1)
    	motionProxy.openHand('RHand')
	time.sleep(0.1)
    
   

if __name__ == "__main__":
    robotIp = "172.20.12.134"

    if len(sys.argv) <= 1:
        print "Usage python almotion_setangles.py robotIP (optional default: 127.0.0.1)"
    else:
        robotIp = sys.argv[1]

    main(robotIp)
